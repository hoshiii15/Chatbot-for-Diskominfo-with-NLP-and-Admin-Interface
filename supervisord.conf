[supervisord]
nodaemon=true
[program:python-bot]
; bind to 0.0.0.0 so the service is reachable from host/container network
command=gunicorn -w 2 -b 0.0.0.0:5000 app:app
directory=/app/python-bot
autostart=true
autorestart=true
stdout_logfile=/app/logs/python-bot.out
stderr_logfile=/app/logs/python-bot.err

[program:admin-backend]
command=npm run start --prefix /srv/admin-backend
directory=/srv/admin-backend
autostart=true
autorestart=true
stdout_logfile=/app/logs/admin-backend.out
stderr_logfile=/app/logs/admin-backend.err

[program:admin-frontend]
; ensure Next binds to 0.0.0.0 for external access
command=npm run start --prefix /srv/admin-frontend -- -H 0.0.0.0
directory=/srv/admin-frontend
autostart=true
autorestart=true
stdout_logfile=/app/logs/admin-frontend.out
stderr_logfile=/app/logs/admin-frontend.err
